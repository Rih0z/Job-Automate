
書き込まれた上記のバグや機能追加について

# ステップ1: バグ修正・機能追加 自動分析プロンプト

あなたはシステム分析の専門家です。バグ修正または機能追加について、Claude Code、docsフォルダの関連資料を活用して、自動的に分析資料を作成してください。

## 指示
以下の手順で分析し、結果をMarkdown形式でtmpフォルダに保存してください：

### 1. 関連ドキュメントの調査
docsフォルダから以下を検索・確認：
- 該当システムの設計書
- API仕様書
- 既知の問題・制限事項
- 過去の類似事例
- アーキテクチャ図

### 1.5. 類似OSS・実装の調査
Web検索を活用して以下を調査：

#### バグ修正の場合
- 同様の問題を解決しているOSSプロジェクトの検索
- 類似バグの修正事例・パッチの調査
- コミュニティでの議論・解決方法の確認
- ベストプラクティスの収集

#### 機能追加の場合
- 同様の機能を実装している既存OSSの調査
- 実装パターン・アーキテクチャの研究
- ユーザビリティ・API設計の参考事例
- パフォーマンス最適化手法の収集

#### 参考実装の分析
- 発見されたOSSの実装アプローチを詳細分析
- 採用されている技術スタック・設計パターン
- コードの品質・保守性評価
- 既存システムへの適用可能性検討

### 2. コードベース分析（Claude Code使用）
以下をClaude Codeで自動分析：

#### バグ修正の場合
- エラーが発生している箇所の特定
- 関連するファイル・関数の依存関係
- ログファイルからの問題パターン抽出
- テストカバレッジの状況

#### 機能追加の場合
- 既存の類似機能の実装パターン調査
- 追加予定箇所の依存関係分析
- 既存アーキテクチャとの整合性確認
- 拡張ポイントの特定

#### 共通項目
- コードの複雑度と潜在的問題点
- パフォーマンスボトルネックの特定
- セキュリティ上の考慮事項

### 3. バグの場合の分析項目
- **エラーログ・トレース分析**
  - スタックトレースの詳細解析
  - エラーパターンの自動分類
  - 関連するシステムログの確認

- **コード品質分析**
  - 問題箇所の静的解析
  - コードメトリクスの評価
  - 潜在的脆弱性の検出

- **影響範囲の自動調査**
  - 依存関係グラフからの影響範囲特定
  - 関連するテストケースの確認
  - データベース・API への影響

### 4. 機能追加の場合の分析項目
- **技術的実現可能性**
  - 既存アーキテクチャとの整合性
  - 必要な技術スタックの確認
  - 実装パターンの特定

- **実装方式の検討**
  - 既存コードベースでの実装方法
  - 必要な変更箇所の特定
  - テスト戦略の提案

### 4. 機能追加の場合の分析項目
- **技術的実現可能性**
  - 既存アーキテクチャとの整合性
  - 必要な技術スタックの確認
  - 実装パターンの特定

- **実装方式の検討**
  - 既存コードベースでの実装方法
  - 必要な変更箇所の特定
  - テスト戦略の提案

- **リソース・複雑度評価**
  - 実装工数の自動見積もり
  - 技術的リスクの評価
  - 既存システムへの影響度

- **OSS参考実装の活用**
  - 発見された実装パターンの分析・評価
  - 自システムへの導入可能性検討
  - 既存の優秀な設計・APIの参考適用
  - ライセンス・依存関係の確認

## Claude Code 分析コマンド例

### バグ修正用
```bash
# エラー箇所の特定
claude-code analyze --error-trace [エラーログファイル]

# 特定の問題箇所の分析
claude-code analyze --target [ファイルパス/関数名]

# 依存関係の可視化
claude-code dependencies --graph --focus [問題箇所]
```

### 機能追加用
```bash
# 類似機能の調査
claude-code search --pattern [機能キーワード]

# 拡張ポイントの分析
claude-code analyze --extension-points

# アーキテクチャ整合性確認
claude-code validate --architecture
```

### 共通
```bash
# プロジェクト全体の分析
claude-code analyze --full-project

# テストカバレッジの確認
claude-code test --coverage-report
```

## 出力ファイル構造
`tmp/auto_analysis_[現在日時].md`

```markdown
# バグ修正・機能追加 自動分析レポート

## 対象概要
- 種別: [バグ修正/機能追加]
- 対象システム: [システム名]
- 分析日時: [日時]

## ドキュメント調査結果
- 参照した関連資料
- 既知の関連情報
- 設計上の制約・ガイドライン

## OSS・類似実装調査結果
### 発見された関連プロジェクト
- [プロジェクト名1]: [URL] - [概要・特徴]
- [プロジェクト名2]: [URL] - [概要・特徴]

### 参考になる実装・アプローチ
- [実装パターン1]: [詳細説明・メリット]
- [実装パターン2]: [詳細説明・メリット]

### 適用可能性評価
- 自システムに適用できる手法
- 技術スタック・ライセンスの整合性
- 改良・カスタマイズが必要な点

## コード分析結果
### バグ修正の場合
- 問題箇所の特定
- エラーパターン分析
- 根本原因の推定

### 機能追加の場合
- 実装候補箇所
- 類似機能の実装パターン
- 必要な新規コンポーネント

### 共通項目
- 依存関係マップ
- 技術的リスク評価
- パフォーマンス・セキュリティ考慮事項

## 推奨アプローチ
- 実装方式の提案（OSS参考を含む）
- 必要な変更箇所
- 注意すべき点

## 自動収集データ
- コードメトリクス
- テスト状況
- アーキテクチャ評価
```

## 注意点
- 全て自動収集可能な情報のみに基づく
- 推測と事実を明確に区別
- 次のステップで活用できる構造化データを生成
- **OSS調査時の注意**
  - ライセンス互換性の確認
  - セキュリティ・品質の事前評価
  - メンテナンス状況・コミュニティの活発さ確認
  - 技術的依存関係の把握
  - Ultrathink. Don't hold back. give it your all！
